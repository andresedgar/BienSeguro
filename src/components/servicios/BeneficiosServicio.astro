---
interface Beneficio {
  titulo: string;
  descripcion?: string;
  items?: string[];
}

interface Props {
  beneficios: Beneficio[];
  imagenBeneficios: string;
  imagenBeneficiosFallback: string;
}

const { beneficios, imagenBeneficios, imagenBeneficiosFallback } = Astro.props;
---

<section class="beneficios-servicio">
  <div class="container">
    <div class="beneficios-layout">
      <div class="beneficios-lista">
        <h2 class="beneficios-titulo">BENEFICIOS</h2>
        {beneficios.map((beneficio) => (
          <div class="beneficio-item">
            <div class="beneficio-header">
              <svg class="beneficio-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="12" fill="var(--color-secondary)"/>
                <path d="M7 12L10 15L17 8" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <h3 class="beneficio-titulo">
                {beneficio.titulo}
              </h3>
            </div>
            {beneficio.descripcion && !beneficio.items && (
              <p class="beneficio-descripcion" set:html={beneficio.descripcion} />
            )}
            {beneficio.descripcion && beneficio.items && (
              <p class="beneficio-descripcion-inline" set:html={beneficio.descripcion} />
            )}
            {beneficio.items && (
              <ul class="beneficio-items">
                {beneficio.items.map((item) => (
                  <li>
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="8" cy="8" r="8" fill="var(--color-primary)"/>
                      <path d="M5 8L7 10L11 6" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span set:html={item} />
                  </li>
                ))}
              </ul>
            )}
          </div>
        ))}
      </div>
      <div class="beneficios-imagen">
        <picture>
          <source srcset={imagenBeneficios} type="image/webp">
          <img src={imagenBeneficiosFallback} alt="Beneficios del servicio" loading="lazy">
        </picture>
      </div>
    </div>
  </div>
</section>

<style>
  .beneficios-servicio {
    padding: var(--spacing-2xl) 0 var(--spacing-3xl) 0;
    background: var(--color-gray-lighter);
  }

  .beneficios-titulo {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--color-secondary);
  }

  .beneficios-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-3xl);
    align-items: start;
  }

  .beneficios-lista {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xl);
  }

  .beneficio-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
  }

  .beneficio-header {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-md);
  }

  .beneficio-icon {
    flex-shrink: 0;
    margin-top: 2px;
  }

  .beneficio-titulo {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--color-secondary);
    margin: 0;
    line-height: 1.4;
  }

  .beneficio-descripcion {
    font-size: 1rem;
    color: #333;
    margin: 0;
    padding-left: 36px;
    line-height: 1.6;
  }

  .beneficio-descripcion-inline {
    font-size: 1rem;
    color: #333;
    margin: 0;
    padding-left: 36px;
    line-height: 1.6;
  }

  .beneficio-items {
    list-style: none;
    padding: 0;
    margin: 0;
    padding-left: 36px;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
  }

  .beneficio-items li {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-sm);
    font-size: 1rem;
    color: #333;
    line-height: 1.6;
  }

  .beneficio-items li svg {
    flex-shrink: 0;
    margin-top: 4px;
  }

  .beneficios-imagen {
    width: 100%;
    height: 100%;
    min-height: 500px;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
  }

  .beneficios-imagen picture {
    width: 100%;
    height: 100%;
    display: block;
  }

  .beneficios-imagen img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  @media (max-width: 1024px) {
    .beneficios-layout {
      grid-template-columns: 1fr;
      gap: var(--spacing-2xl);
    }

    .beneficios-imagen {
      min-height: 400px;
    }
  }

  @media (max-width: 768px) {
    .beneficios-servicio {
      padding: var(--spacing-xl) 0 var(--spacing-2xl) 0;
    }

    .beneficios-titulo {
      font-size: 2rem;
    }

    .beneficio-titulo {
      font-size: 1rem;
    }

    .beneficio-descripcion,
    .beneficio-descripcion-inline,
    .beneficio-items li {
      font-size: 0.95rem;
    }

    .beneficios-imagen {
      min-height: 350px;
    }
  }

  @media (max-width: 480px) {
    .beneficios-titulo {
      font-size: 1.75rem;
    }

    .beneficios-imagen {
      min-height: 300px;
    }
  }
</style>
